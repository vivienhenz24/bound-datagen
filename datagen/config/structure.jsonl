{
    "input": {
      "model": "gpt-5.2-codex",
      "instructions": "{{FILE:codex-rs/core/gpt-5.2-codex_prompt.md}}",
      "input": [
        {
          "type": "message",
          "role": "user",
          "content": [
            {
              "type": "input_text",
              "text": "# AGENTS.md instructions for {{CWD}}\n\n<INSTRUCTIONS>\n{{FILE:AGENTS.md}}\n</INSTRUCTIONS>"
            }
          ]
        },
        {
          "type": "message",
          "role": "user",
          "content": [
            {
              "type": "input_text",
              "text": "{{ENVIRONMENT_CONTEXT_XML}}"
            }
          ]
        },
        {
          "type": "message",
          "role": "user",
          "content": [
            {
              "type": "input_text",
              "text": "Change src/main.rs to log \"hello\" instead of \"hi\"."
            }
          ]
        }
      ],
      "tools": [
        {
          "type": "function",
          "name": "shell_command",
          "description": "Runs a shell command and returns its output.\n- Always set the `workdir` param when using the shell_command function. Do not use `cd` unless absolutely necessary.",
          "strict": false,
          "parameters": {
            "type": "object",
            "properties": {
              "command": { "type": "string", "description": "The shell script to execute in the user's default shell" },
              "workdir": { "type": "string", "description": "The working directory to execute the command in" },
              "login": { "type": "boolean", "description": "Whether to run the shell with login shell semantics. Defaults to true." },
              "timeout_ms": { "type": "number", "description": "The timeout for the command in milliseconds" },
              "sandbox_permissions": { "type": "string", "description": "Sandbox permissions for the command. Set to \"require_escalated\" to request running without sandbox restrictions; defaults to \"use_default\"." },
              "justification": { "type": "string", "description": "Only set if sandbox_permissions is \"require_escalated\". 1-sentence explanation of why we want to run this command." }
            },
            "required": ["command"],
            "additionalProperties": false
          }
        },
        {
          "type": "custom",
          "name": "apply_patch",
          "description": "Use the `apply_patch` tool to edit files. This is a FREEFORM tool, so do not wrap the patch in JSON.",
          "format": {
            "type": "grammar",
            "syntax": "lark",
            "definition": "{{FILE:codex-rs/core/src/tools/handlers/tool_apply_patch.lark}}"
          }
        }
      ],
      "tool_choice": "auto",
      "parallel_tool_calls": false,
      "reasoning": null,
      "store": false,
      "stream": true,
      "include": [],
      "prompt_cache_key": null,
      "text": null
    },
    "output": [
      {
        "type": "function_call",
        "name": "shell_command",
        "arguments": "{\"command\":\"sed -n 1,120p src/main.rs\",\"workdir\":\"{{CWD}}\"}",
        "call_id": "call_shell_1"
      },
      {
        "type": "function_call_output",
        "call_id": "call_shell_1",
        "output": "fn main() { println!(\"hi\"); }\n"
      },
      {
        "type": "custom_tool_call",
        "call_id": "call_patch_1",
        "name": "apply_patch",
        "input": "*** Begin Patch\n*** Update File: src/main.rs\n@@\n-fn main() { println!(\"hi\"); }\n+fn main() { println!(\"hello\"); }\n*** End Patch\n"
      },
      {
        "type": "custom_tool_call_output",
        "call_id": "call_patch_1",
        "output": "Applied patch to src/main.rs."
      },
      {
        "type": "message",
        "role": "assistant",
        "content": [
          { "type": "output_text", "text": "Updated src/main.rs to log \"hello\" instead of \"hi\"." }
        ]
      }
    ]
  }
  